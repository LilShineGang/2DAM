
ACCESO A DATOS
--------------------------
1. Un problema que nos hemos encontrado en la practica (0.5p)

2. Nos da una clase y pasarla a json y guardar el fichero(saveJSON). (2.5p)

private static void saveJSON(Levels levels, File file) throws FileNotFoundException, UnsupportedEncodingException {
        try (FileWriter writer = new FileWriter(file)) {
            Gson gson = new GsonBuilder()
                    .registerTypeAdapter(Rectangle2D.class, new Rectangle2DAdapterJSON())
                    .create();
            gson.toJson(levels, writer);
        } catch (IOException e) {
            throw new RuntimeException("Error al guardar JSON", e);
        }
    }
}

3. Hacer un adaptador aparte de una clase (como la de rectangle2D).

public class Rectangle2DAdapterJSON implements JsonSerializer<Rectangle2D>, JsonDeserializer<Rectangle2D> {

    // Convierte un Rectangle2D a formato JSON
    // Crea un objeto JSON con las propiedades:
    @Override
    public JsonElement serialize(Rectangle2D src, Type typeOfSrc, JsonSerializationContext context) {
        JsonObject obj = new JsonObject();
        obj.addProperty("minX", src.getMinX());        // Posición X mínima
        obj.addProperty("minY", src.getMinY());        // Posición Y mínima
        obj.addProperty("width", src.getWidth());      // Ancho del rectángulo
        obj.addProperty("height", src.getHeight());    // Alto del rectángulo
        return obj;
    }

    // Convierte un objeto JSON a Rectangle2D
    // Lee las propiedades del JSON y crea un nuevo Rectangle2D
    @Override
    public Rectangle2D deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
            throws JsonParseException {
        JsonObject obj = json.getAsJsonObject();
        // Crea el Rectangle2D con los valores extraídos del JSON
        return new Rectangle2D(
                obj.get("minX").getAsDouble(),      // Posición X
                obj.get("minY").getAsDouble(),      // Posición Y
                obj.get("width").getAsDouble(),     // Ancho
                obj.get("height").getAsDouble()     // Alto
        );
    }
}


4. Serializar xml. (2p)

// Guarda niveles en formato XML
private static void saveXML(Levels levels, File file) throws IOException {
    try {
        JAXBContext context = JAXBContext.newInstance(Levels.class);
        Marshaller mr = context.createMarshaller();
        mr.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true); // Formato con indentación
        mr.marshal(levels, file);
    } catch (Exception e) {
        throw new IOException("Error al guardar XML", e);
    }
}

// Carga niveles desde un archivo XML
private static Levels loadXML(File file) throws IOException {
    try {
        JAXBContext context = JAXBContext.newInstance(Levels.class);
        Unmarshaller un = context.createUnmarshaller();
        Levels m = (Levels) un.unmarshal(file);
        return m;
    } catch (Exception e) {
        throw new IOException("Error al cargar XML", e);
    }
}



MOVILES
-----------------------------
1. Diferentes compiladores que tiene android

2. Tipo de tecnologias que hay

3. Explicar android studio por encima

4. Explicar estructura fichero de android

5. Un poco de kmp
